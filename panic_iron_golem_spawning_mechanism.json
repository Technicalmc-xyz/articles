[{"children":[{"text":"Quick Overview on Iron Golem Spawning"}],"type":"h1"},{"children":[{"text":"Barring manual spawning, Iron Golem can naturally be spawned by villagers under two circumstances:"}],"id":1630963097875,"type":"p"},{"children":[{"text":""}],"id":1630963160109,"type":"p"},{"children":[{"children":[{"children":[{"text":"Gossip"}],"id":1630963160258,"type":"lic"}],"id":1630963160722,"type":"li"},{"children":[{"children":[{"text":"Panic"}],"id":1630963163504,"type":"lic"}],"id":1630963163504,"type":"li"}],"id":1630963160714,"type":"ol"},{"children":[{"text":""}],"id":1630963164984,"type":"p"},{"children":[{"text":"Gossip is slow so most iron farming uses the panic method. Panicking will trigger spawning instantly so it is way more faster. In this article, I will go over how the panic way works. This article is based on Minecraft Java 1.17.1 and Fabric Yarn mapping."}],"id":1630963165802,"type":"p"},{"children":[{"text":""}],"id":1630963261063,"type":"p"},{"children":[{"text":"What is Panic and When Will It Happen: The Brain"}],"id":1630963261255,"type":"h1"},{"children":[{"text":"\"Panic\" is triggered by "},{"code":true,"text":"PanicTask"},{"text":". In my opinion, a task is a conditional, time limited and circular long running process in the "},{"code":true,"text":"Brain"},{"text":". Let's talk about Brain first, as golem spawning heavily depends on the brain mechanism. Brain handles lots of things: memories, sensors, tasks, activities and more."}],"id":1630963284248,"type":"p"},{"children":[{"text":"In every game tick ("},{"code":true,"text":"Brain#tick"},{"text":"), the "},{"code":true,"text":"Brain"},{"text":" will do the following things in sequence (which means that they will be on the main thread):"}],"id":1630977281955,"type":"p"},{"children":[{"children":[{"children":[{"code":true,"text":"tickMemories"},{"text":" : Reduce memories' expire time by one and forget it they are expired after ticking. See Memories below."}],"id":1630963507978,"type":"lic"}],"id":1630963508788,"type":"li"},{"children":[{"children":[{"code":true,"text":"tickSensors"},{"text":" : Sense stuff periodically. All sensors are ran in sequence. This mechanism will be used in detecting hostile mobs and golems. See Sensors below."}],"id":1630963531196,"type":"lic"}],"id":1630963531196,"type":"li"},{"children":[{"children":[{"code":true,"text":"startTasks"},{"text":" : Check every registered tasks and start them. They must have a matching activity and stopped. See Tasks below."}],"id":1630963674721,"type":"lic"}],"id":1630963674721,"type":"li"},{"children":[{"children":[{"code":true,"text":"updateTasks"},{"text":" : Check every running tasks, tick them (if they can continue to run) or stop them (if they should stop)."}],"id":1630963758167,"type":"lic"}],"id":1630963758167,"type":"li"}],"id":1630963508774,"type":"ul"},{"children":[{"text":""}],"id":1630963789829,"type":"p"},{"children":[{"text":"Memories"}],"id":1630963667890,"type":"h2"},{"children":[{"text":"Memories are persistent key value pairs with optional expiry times (if not specified then "},{"code":true,"text":"Long.MAX_VALUE"},{"text":") stored in Brain. Keys are "},{"code":true,"text":"MemoryModuleType<T>"},{"text":" while values can be anything with type "},{"code":true,"text":"T"},{"text":" . Expire times are in ticks, represented by "},{"code":true,"text":"long"},{"text":". Brains can remember memories at any time ("},{"code":true,"text":"Brain#remember"},{"text":") and they will be checked for expiry at any tick ("},{"code":true,"text":"tickMemories"},{"text":")."}],"id":1630964097871,"type":"p"},{"children":[{"text":"All \"remember\" below means remembering a memory module with a value in the brain."}],"id":1630977463770,"type":"p"},{"children":[{"text":"In golem spawning, the most significant one is "},{"code":true,"text":"MemoryModuleType.GOLEM_DETECTED_RECENTLY"},{"text":" (with a Boolean value and 600 ticks expiry time, see "},{"code":true,"text":"GolemLastSeenSensor#rememberIronGolem"},{"text":"). It will be remembered when:"}],"id":1630964165457,"type":"p"},{"children":[{"children":[{"children":[{"text":"A villager participated in iron golem spawning (talk about that later), or"}],"id":1630964569195,"type":"lic"}],"id":1630964569910,"type":"li"},{"children":[{"children":[{"text":"A villager detected an iron golem (in "},{"code":true,"text":"GolemLastSeenSensor"},{"text":") in a 16 x 16 x 16 range from itself (in "},{"code":true,"text":"NearestLivingEntitiesSensor"},{"text":"). See the Sensors section below."}],"id":1630964586943,"type":"lic"}],"id":1630964586943,"type":"li"}],"id":1630964569875,"type":"ul"},{"children":[{"text":"Other important memory modules for iron golem spawning are "},{"code":true,"text":"MemoryModuleType.MOBS"},{"text":" and "},{"code":true,"text":"MemoryModuleType.NEAREST_HOSTILE"},{"text":". They not only display whether there is a golem nearby, but also shows whether there are hostile mobs and will be used to trigger panicking."}],"id":1630964578329,"type":"p"},{"children":[{"text":""}],"id":1630966540307,"type":"p"},{"children":[{"text":"Sensors"}],"id":1630966540457,"type":"h2"},{"children":[{"text":"Sensors are ticked periodically after all memories are ticked. Every sensor have a period time, which defaults to 20 ticks, but can be customized (for example, "},{"code":true,"text":"GolemLastSeenSensor"},{"text":" runs every 200 ticks). Sensors will not start instantly when the brain starts ticking, since the games adds a random starting delay in every sensor constructor ("},{"code":true,"text":"this.lastSenseTime = RANDOM.nextInt(senseInterval);"},{"text":"). Because of that, sensors won't start and run simultaneously (all in the same tick). For example, even if lots of sensors have the same period, they will run in different ticks and the order is undefined."}],"id":1630966543949,"type":"p"},{"children":[{"text":""}],"id":1630966598445,"type":"p"},{"children":[{"text":"The most important sensors in iron golem spawning are "},{"code":true,"text":"NearestLivingEntitiesSensor"},{"text":", "},{"code":true,"text":"VillagerHostilesSensor"},{"text":" and "},{"code":true,"text":"GolemLastSeenSensor"},{"text":", while the first two scans for all living entities (golems and hostile mobs) and the last one checks for the first's result and detect if there is already an existing golem nearby."}],"id":1630966599110,"type":"p"},{"children":[{"text":"NearestLivingEntitiesSensor"}],"id":1630966819725,"type":"h3"},{"children":[{"text":"Runs every 20 ticks."}],"id":1630966823916,"type":"p"},{"children":[{"text":"It will look for all living entities in a 16 x 16 x 16 box from the villager. Then, it will store its results to the MOBS and VISIBLE_MOBS memories, which will NOT expire."}],"id":1630968337443,"type":"p"},{"children":[{"text":"How to determine if a mob is visible: TODO ("},{"code":true,"text":"NearestLivingEntitiesSensor#testTargetPredicate"},{"text":")"}],"id":1630979764819,"type":"p"},{"children":[{"text":"VillagerHostilesSensor"}],"id":1630968340369,"type":"h3"},{"children":[{"text":"Runs every 20 ticks. If it is ran in the same tick with "},{"code":true,"text":"NearestLivingEntitiesSensor"},{"text":", it will be started after the "},{"code":true,"text":"NearestLivingEntitiesSensor"},{"text":" done detecting."}],"id":1630968338879,"type":"p"},{"children":[{"text":"It will check the "},{"code":true,"text":"VISIBLE_MOBS"},{"text":" memory from "},{"code":true,"text":"NearestLivingEntitiesSensor"},{"text":" and compare each of them to a predefined key value pair that contains all hostile mobs and their endanger range (checked using "},{"code":true,"text":"squaredDistanceTo"},{"text":"). If it finds any, it will remember the "},{"code":true,"text":"NEAREST_HOSTILE"},{"text":" memory. This memory will NOT expire. It is later used for panic determination."}],"id":1630968448537,"type":"p"},{"children":[{"text":"GolemLastSeenSensor"}],"id":1630966907245,"type":"h3"},{"children":[{"text":"Runs every 200 ticks. If it is ran in the same tick with "},{"code":true,"text":"VillagerHostilesSensor"},{"text":", it will be started after the "},{"code":true,"text":"VillagerHostilesSensor"},{"text":" done detecting."}],"id":1630966911806,"type":"p"},{"children":[{"text":"It will check the "},{"code":true,"text":"MOBS"},{"text":" memory and see if there is a golem in it. If there is, it will remember the "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" memory for 600 ticks."}],"id":1630966984272,"type":"p"},{"children":[{"text":""}],"id":1630967023786,"type":"p"},{"children":[{"text":"Tasks"}],"id":1630967023964,"type":"h2"},{"children":[{"text":"Task is a complex system. Tasks are conditional, circular, time limited and long running processes in brains. Examples: "},{"code":true,"text":"PanicTask"},{"text":", "},{"code":true,"text":"WakeUpTask"},{"text":", "},{"code":true,"text":"OpenDoorsTask"},{"text":"."}],"id":1630967140604,"type":"p"},{"children":[{"text":""}],"id":1630979216268,"type":"p"},{"children":[{"text":"Tasks are conditional. Each task has an "},{"code":true,"text":"Activity"},{"text":" key. If the brain does not contain a possible activity that matches the activity key in the task, this task will not run. For example, villagers have Core, Idle, Meet, Rest, Panic, etc. activities. Core tasks will always run regardless of what activity the villager is in. Fortunately, the only task related to golem spawning is "},{"code":true,"text":"PanicTask"},{"text":" and it is a core task."}],"id":1630967284166,"type":"p"},{"children":[{"text":"They are conditional in other ways, too. Each task has a list of required memories and unique (overridden) checking methods. Tasks will only be started it they match all these conditions."}],"id":1630967423438,"type":"p"},{"children":[{"text":"Tasks are long running as well. They will keep running if additional conditions are met in every game tick. However, they are time limited. Each task has a hard coded minimum run time and maximum run time. When they are started, the game will randomly choose an end time between the min run time and max run time."}],"id":1630967582251,"type":"p"},{"children":[{"text":"They are also circular: after a task stops, the brain will attempt to start it again in the next tick if activity matches."}],"id":1630979249593,"type":"p"},{"children":[{"text":""}],"id":1630967679706,"type":"p"},{"children":[{"text":"Flow chart:"}],"id":1630967684963,"type":"p"},{"children":[{"children":[{"children":[{"text":"Brain is ticked. It calls "},{"code":true,"text":"startTasks"},{"text":" method."}],"id":1630967687303,"type":"lic"}],"id":1630967688157,"type":"li"},{"children":[{"children":[{"text":"Brain iterates through all tasks."}],"id":1630967705758,"type":"lic"}],"id":1630967705758,"type":"li"},{"children":[{"children":[{"text":"For each task, it checks whether the brain's "},{"code":true,"text":"possibleActivities"},{"text":" contains an item matching activity requirements for the task. If not, skip. For villagers, the "},{"code":true,"text":"possibleActivities"},{"text":" list always contains Core."}],"id":1630967717763,"type":"lic"}],"id":1630967717763,"type":"li"},{"children":[{"children":[{"text":"Check if the task is already running. If so, skip."}],"id":1630967753460,"type":"lic"}],"id":1630967753460,"type":"li"},{"children":[{"children":[{"text":"Call the "},{"code":true,"text":"Task#tryStarting"},{"text":" method."}],"id":1630967775489,"type":"lic"}],"id":1630967775489,"type":"li"},{"children":[{"children":[{"text":"The task will call the "},{"code":true,"text":"hasRequiredMemoryState"},{"text":" method to check if the brain contains all required memories. If not, return."}],"id":1630967788022,"type":"lic"}],"id":1630967788022,"type":"li"},{"children":[{"children":[{"text":"The task will call the "},{"code":true,"text":"shouldRun"},{"text":" method. It defaults to true but is heavily overridden to meet custom requirements for each task. If not, return."}],"id":1630967800359,"type":"lic"}],"id":1630967800359,"type":"li"},{"children":[{"children":[{"text":"Mark the task as running."}],"id":1630967860844,"type":"lic"}],"id":1630967860844,"type":"li"},{"children":[{"children":[{"text":"Randomly choose an end time from min run time to max run time. Both values default to 60."}],"id":1630967867192,"type":"lic"}],"id":1630967867192,"type":"li"},{"children":[{"children":[{"text":"Call the overridden run method. Indicating the task is started running in this tick."}],"id":1630967911266,"type":"lic"}],"id":1630967911266,"type":"li"},{"children":[{"children":[{"text":"... Start other tasks. Then the "},{"code":true,"text":"startTasks"},{"text":" method is returned."}],"id":1630967934734,"type":"lic"}],"id":1630967934734,"type":"li"},{"children":[{"children":[{"text":"Brain then calls "},{"code":true,"text":"updateTasks"},{"text":", which ticks every running tasks."}],"id":1630967942322,"type":"lic"}],"id":1630967942322,"type":"li"},{"children":[{"children":[{"text":"Brain iterates through all running tasks. For each of them, it calls "},{"code":true,"text":"Task#tick"},{"text":"."}],"id":1630967973062,"type":"lic"}],"id":1630967973062,"type":"li"},{"children":[{"children":[{"text":"Task checks whether the world time is greater than its end time. If so, it will call the "},{"code":true,"text":"stop"},{"text":" method to mark it as stopped and then call "},{"code":true,"text":"finishRunning"},{"text":" (overridden method)."}],"id":1630967993900,"type":"lic"}],"id":1630967993900,"type":"li"},{"children":[{"children":[{"text":"Task calls "},{"code":true,"text":"shouldKeepRunning"},{"text":" (overridden method) to check if it should continue running. If NOT, it calls "},{"code":true,"text":"stop"},{"text":" as well."}],"id":1630968042179,"type":"lic"}],"id":1630968042179,"type":"li"},{"children":[{"children":[{"text":"Task calls "},{"code":true,"text":"keepRunning"},{"text":" (overridden method) to tick itself."}],"id":1630968081935,"type":"lic"}],"id":1630968081935,"type":"li"}],"id":1630967688084,"type":"ol"},{"children":[{"text":""}],"id":1630968101209,"type":"p"},{"children":[{"text":"PanicTask"}],"id":1630968134695,"type":"h3"},{"children":[{"text":"For iron golem spawning, we need to focus on "},{"code":true,"text":"PanicTask"},{"text":". It has the following properties:"}],"id":1630968102274,"type":"p"},{"children":[{"children":[{"children":[{"text":"Min and Max run time: 60 ticks. Therefore, it will always run every 60 ticks, regardless of randomness."}],"id":1630968139465,"type":"lic"}],"id":1630968139884,"type":"li"},{"children":[{"children":[{"text":"Required memory states: none."}],"id":1630968155710,"type":"lic"}],"id":1630968155710,"type":"li"},{"children":[{"children":[{"text":"Required activity: Core. This means that it will always run, regardless of activities (unlike gossip)."}],"id":1630968163690,"type":"lic"}],"id":1630968163690,"type":"li"},{"children":[{"children":[{"code":true,"text":"shouldRun"},{"text":" (whether the task will START to run, NOT CONTINUE running): always true. This means that it will always call "},{"code":true,"text":"run()"},{"text":", but not "},{"code":true,"text":"continueRunning"},{"text":"."}],"id":1630968177235,"type":"lic"}],"id":1630968177235,"type":"li"},{"children":[{"children":[{"code":true,"text":"run"},{"text":", "},{"code":true,"text":"shouldKeepRunning"},{"text":" and "},{"code":true,"text":"keepRunning"},{"text":" implementations: too long to describe here. See below."}],"id":1630968212501,"type":"lic"}],"id":1630968212501,"type":"li"}],"id":1630968139807,"type":"ol"},{"children":[{"text":""}],"id":1630968235270,"type":"p"},{"children":[{"code":true,"text":"run"},{"text":" (when the task is started): Checks whether its brain contains "},{"code":true,"text":"HURT_BY"},{"text":" memory OR whether its brain contains "},{"code":true,"text":"NEAREST_HOSTILE"},{"text":" memory. If so, set the brain for panic activity. This will:"}],"id":1630968236450,"type":"p"},{"children":[{"children":[{"children":[{"text":"Forget "},{"code":true,"text":"PATH"},{"text":", "},{"code":true,"text":"WALK_TARGET"},{"text":", "},{"code":true,"text":"LOOK_TARGET"},{"text":", "},{"code":true,"text":"BREED_TARGET"},{"text":" and "},{"code":true,"text":"INTERACTION_TARGET"},{"text":" memories."}],"id":1630968719528,"type":"lic"}],"id":1630968720310,"type":"li"},{"children":[{"children":[{"code":true,"text":"doExclusively(PANIC)"},{"text":": Change the activity to panic."}],"id":1630968746116,"type":"lic"}],"id":1630968746116,"type":"li"}],"id":1630968720201,"type":"ol"},{"children":[{"text":"(The two actions above have nothing to do with golem spawning)"}],"id":1630976969371,"type":"p"},{"children":[{"text":"Keep in mind that run will only be ran once every 60 ticks."}],"id":1630968769138,"type":"p"},{"children":[{"code":true,"text":"shouldKeepRunning"},{"text":": Checks whether its brain contains "},{"code":true,"text":"HURT_BY"},{"text":" memory OR whether its brain contains "},{"code":true,"text":"NEAREST_HOSTILE"},{"text":" memory. If not, stops the task in this tick and prevents future "},{"code":true,"text":"continueRunning"},{"text":" calls."}],"id":1630968784745,"type":"p"},{"children":[{"text":"If "},{"code":true,"text":"shouldKeepRunning"},{"text":" returns true, then "},{"code":true,"text":"keepRunning"},{"text":" will be called. If the current world time is a multiple of 100, it will call the villager's "},{"code":true,"text":"summonGolem"},{"text":" method. I will describe that later."}],"id":1630968820265,"type":"p"},{"children":[{"text":""}],"id":1630968870609,"type":"p"},{"children":[{"text":"Conclusion"}],"id":1630968886061,"type":"h2"},{"children":[{"text":"This is a brief conclusion for how the game makes villagers panic and attempts to spawn the golem."}],"id":1630968892881,"type":"p"},{"children":[{"children":[{"children":[{"text":"For every 20 ticks, look for all living entities in a 16 x 16 x 16 box from the villager, then store it into "},{"code":true,"text":"MOBS"},{"text":" and "},{"code":true,"text":"VISIBLE_MOBS"},{"text":" memories."}],"id":1630969068124,"type":"lic"}],"id":1630977124292,"type":"li"},{"children":[{"children":[{"text":"For every 20 ticks, iterate through "},{"code":true,"text":"VISIBLE_MOBS"},{"text":" and checks if there is a hostile nearby. If so, remembers "},{"code":true,"text":"NEAREST_HOSTILE"},{"text":"."}],"id":1630977129593,"type":"lic"}],"id":1630977129625,"type":"li"},{"children":[{"children":[{"text":"For every 200 ticks, iterate through "},{"code":true,"text":"MOBS"},{"text":" and check if there is a golem nearby. If so, remembers "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" for 600 ticks."}],"id":1630977131313,"type":"lic"}],"id":1630977131350,"type":"li"},{"children":[{"children":[{"text":"For every 60 ticks, if the brain remembers "},{"code":true,"text":"NEAREST_HOSTILE"},{"text":" or "},{"code":true,"text":"HURT_BY"},{"text":", AND the current world time is a multiple of 100, call the villager's "},{"code":true,"text":"summonGolem"},{"text":" method."}],"id":1630977133098,"type":"lic"}],"id":1630977133131,"type":"li"}],"id":1630977124197,"type":"ol"},{"children":[{"text":""}],"id":1630977134939,"type":"p"},{"children":[{"text":"Spawning Golems"}],"id":1630977089704,"type":"h1"},{"children":[{"text":"We have analyzed when the game will try to summon golems. Now I will introduce what happens in the "},{"code":true,"text":"summonGolem"},{"text":" method. "},{"code":true,"text":"summonGolem"},{"text":" is a member method of "},{"code":true,"text":"VillagerEntity"},{"text":", so we assume all operations below are executed as the villager that is panicking."}],"id":1630977149297,"type":"p"},{"children":[{"text":"Firstly, it will check whether the villager can spawn golems ("},{"code":true,"text":"VillagerEntity#canSummonGolem"},{"text":"). This depends on whether the villager had slept recently and whether it remembers "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":"."}],"id":1630977185395,"type":"p"},{"children":[{"text":"When a villager sleeps ("},{"code":true,"text":"VillagerEntity#sleep"},{"text":"), it will remember the "},{"code":true,"text":"MemoryModuleType.LAST_SLEPT"},{"text":" memory module with the value of current world time. This is later used in detecting whether the villager is slept recently. The "},{"code":true,"text":"canSummonGolem"},{"text":" method calls "},{"code":true,"text":"VillagerEntity#hasRecentlySlept"},{"text":" method, which returns true if the last slept time ("},{"code":true,"text":"LAST_SLEPT"},{"text":" memory) exists and its difference with the current world time is lesser than 24000 ticks (one game day). If it returns false, which means that the villager has not been slept for a day, the methods returns false and the spawning process aborts."}],"id":1630977398240,"type":"p"},{"children":[{"text":"The "},{"code":true,"text":"canSummonGolem"},{"text":" method will consequently check if "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" memory exists. Remainder: that this memory will expire after 600 ticks and will expire before tasks got ticked (so basically before calling "},{"code":true,"text":"summonGolem"},{"text":" method). If it exists, it indicates that the villager has just spawned (or participated in spawning, which we will talk about later) a golem within 600 ticks and the spawning process will abort."}],"id":1630977783094,"type":"p"},{"children":[{"text":"Now, the current villager is capable of spawning a new golem. It will then ask two more villagers to participate in that process. The flow is:"}],"id":1630977889502,"type":"p"},{"children":[{"children":[{"children":[{"text":"Get all villagers that are in a 10 x 10 x 10 box from the current villager. This includes itself. ("},{"code":true,"text":"getNonSpectatingEntities"},{"text":")"}],"id":1630977926261,"type":"lic"}],"id":1630977926797,"type":"li"},{"children":[{"children":[{"text":"Remove villagers that cannot summon golems from the list using the "},{"code":true,"text":"summonGolem"},{"text":" method, which means its requirements are same as the current villager."}],"id":1630977980489,"type":"lic"}],"id":1630977980489,"type":"li"},{"children":[{"children":[{"text":"Check if the remaining list has >= three villagers. Three is the number of required villagers for panic spawning. For gossip spawning, it requires five. Remember, the list includes the current villager itself. If there are less than three villagers, the spawning process stops."}],"id":1630978059410,"type":"lic"}],"id":1630978059410,"type":"li"},{"children":[{"children":[{"text":"Summon the golem: "},{"code":true,"text":"spawnIronGolem"},{"text":"."}],"id":1630978147634,"type":"lic"}],"id":1630978147634,"type":"li"},{"children":[{"children":[{"text":"For each participating villagers, force them to remember the "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" memory for 600 ticks, regardless of whether they detected a golem."}],"id":1630978158563,"type":"lic"}],"id":1630978158563,"type":"li"}],"id":1630977926649,"type":"ol"},{"children":[{"text":""}],"id":1630978153651,"type":"p"},{"children":[{"text":"spawnIronGolem"}],"id":1630977926748,"type":"h2"},{"children":[{"text":"TODO"}],"id":1630978224356,"type":"p"},{"children":[{"text":""}],"id":1630978227862,"type":"p"},{"children":[{"text":"Conclusion"}],"id":1630978228037,"type":"h2"},{"children":[{"text":"Let's wrap up what happens after a villager is panicking:"}],"id":1630978254277,"type":"p"},{"children":[{"children":[{"children":[{"text":"Checks if the villager has slept within 24000 ticks (one game day)."}],"id":1630978267058,"type":"lic"}],"id":1630978270954,"type":"li"},{"children":[{"children":[{"text":"Checks if the villager does not remember the "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" memory."}],"id":1630978288801,"type":"lic"}],"id":1630978288801,"type":"li"},{"children":[{"children":[{"text":"Find other two villagers that matches the two conditions above within 10 x 10 x 10 from the current villager."}],"id":1630978310519,"type":"lic"}],"id":1630978310519,"type":"li"},{"children":[{"children":[{"text":"Spawn the golem."}],"id":1630978340292,"type":"lic"}],"id":1630978340292,"type":"li"},{"children":[{"children":[{"text":"Force himself and other two villagers to remember "},{"code":true,"text":"GOLEM_DETECTED_RECENTLY"},{"text":" for 600 ticks."}],"id":1630978342505,"type":"lic"}],"id":1630978342505,"type":"li"}],"id":1630978270832,"type":"ol"},{"children":[{"text":""}],"id":1630978359233,"type":"p"},{"children":[{"text":"Iron Farm General Design Tips & Critical Factors & Conclusion"}],"id":1630978360917,"type":"h1"},{"children":[{"text":"Through the analysis, we know that:"}],"id":1630978336591,"type":"p"},{"children":[{"children":[{"children":[{"text":"A villager scans a 16 x 16 x 16 box for hostiles (must be directly visible and within a specific range which is different for each mob) and golems."}],"id":1630978617169,"type":"lic"}],"id":1630978618530,"type":"li"},{"children":[{"children":[{"text":"If a villager detects a golem within that range, it stops spawning for 600 ticks."}],"id":1630978674206,"type":"lic"}],"id":1630978674205,"type":"li"},{"children":[{"children":[{"text":"If a villager finds a hostile, it will panic and try to spawn."}],"id":1630978687537,"type":"lic"}],"id":1630978687537,"type":"li"},{"children":[{"children":[{"text":"Including the panicking villager, it requires three villagers within 10 x 10 x 10 from the panicking villager to spawn a golem."}],"id":1630978713025,"type":"lic"}],"id":1630978713025,"type":"li"},{"children":[{"children":[{"text":"All three villagers should have been slept within 24000 ticks."}],"id":1630978740883,"type":"lic"}],"id":1630978740882,"type":"li"},{"children":[{"children":[{"text":"All three villagers must not notice a golem in 16 x 16 x 16 range in the last 600 ticks."}],"id":1630978755847,"type":"lic"}],"id":1630978755847,"type":"li"},{"children":[{"children":[{"text":"After spawning, they need to wait for another 600 ticks to spawn another one, even if there is not any golems in their detecting range."}],"id":1630978834501,"type":"lic"}],"id":1630978834501,"type":"li"}],"id":1630978618348,"type":"ol"},{"children":[{"text":"Therefore, when designing iron farms, it is important to keep in mind that:"}],"id":1630978859430,"type":"p"},{"children":[{"text":"Core: A group of three villagers."}],"id":1630978945652,"type":"p"},{"children":[{"children":[{"children":[{"text":"Keep cores apart. Do not leave the spawning area within other groups' detecting range, or spawning will affect other cores. Another solution is to let cores spawn golems simultaneously (panic the cores all together)."}],"id":1630978877399,"type":"lic"}],"id":1630978877999,"type":"li"},{"children":[{"children":[{"text":"Move golems outside of villagers' detecting ranges as soon as possible. An extreme practice would be nether portals."}],"id":1630978925936,"type":"lic"}],"id":1630978925936,"type":"li"},{"children":[{"children":[{"text":"Kill golems outside of villagers' detecting ranges. Killing takes time. If they are burnt within detecting ranges, all villagers will continue refresh their 600 ticks timer."}],"id":1630979057164,"type":"lic"}],"id":1630979057164,"type":"li"}],"id":1630978877806,"type":"ol"},{"children":[{"text":""}],"id":1630979126998,"type":"p"}]